{"version":3,"file":"js/app.bd360968.js","mappings":"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","sources":["webpack://web/./src/App.vue","webpack://web/src/App.vue","webpack://web/./src/App.vue?51dd","webpack://web/./src/App.vue?0e40","webpack://web/./src/pages/PC/index.vue","webpack://web/src/pages/PC/index.vue","webpack://web/./src/pages/PC/index.vue?5c55","webpack://web/./src/pages/PC/index.vue?c1b3","webpack://web/./src/pages/Mobile/index.vue","webpack://web/./src/config/index.js","webpack://web/./src/api/ajax.js","webpack://web/./src/api/index.js","webpack://web/./src/utils/time.js","webpack://web/./src/utils/fileUtil.js","webpack://web/src/pages/Mobile/index.vue","webpack://web/./src/pages/Mobile/index.vue?bf7e","webpack://web/./src/pages/Mobile/index.vue?79c7","webpack://web/./src/router/index.js","webpack://web/./src/main.js","webpack://web/webpack/bootstrap","webpack://web/webpack/runtime/chunk loaded","webpack://web/webpack/runtime/compat get default export","webpack://web/webpack/runtime/define property getters","webpack://web/webpack/runtime/global","webpack://web/webpack/runtime/hasOwnProperty shorthand","webpack://web/webpack/runtime/make namespace object","webpack://web/webpack/runtime/jsonp chunk loading","webpack://web/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"app\">\n        <router-view></router-view>\n    </div>\n</template>\n\n<script>\n\n    export default {\n        name: 'App',\n    }\n</script>\n\n<style>\n    html, body {\n        height: 100%;\n        width: 100%;\n    }\n\n    #app {\n        height: 100%;\n        width: 100%;\n    }\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=290c4a40&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=290c4a40&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',[_vm._v(\"hahahah\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <span>hahahah</span>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"pc-index\"\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a91f1b6e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a91f1b6e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('m-chat',{ref:\"mChat\",attrs:{\"messages\":_vm.messages,\"loadMore\":_vm.loadMore,\"height\":\"100vh\",\"config\":_vm.config,\"comment\":true},on:{\"submit\":_vm.submit,\"extendItemClick\":_vm.extendItemClick}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nexport  default {\r\n\r\n    // BASE_URL:\"http://localhost:8081/api\",\r\n    // FILE_DOWN_URL:\"http://localhost:8081/api/file\"\r\n    BASE_URL:\"/api/\",\r\n    FILE_DOWN_URL:\"/api/file\"\r\n}\r\n","import axios from \"axios\";\r\nimport config from \"../config\";\r\n\r\nlet BASE_URL=config.BASE_URL\r\n\r\nlet code = localStorage.getItem('code')\r\nexport default function ajax(url, data = {}, type = \"GET\") {\r\n    return new Promise(function (resolve, reject) {\r\n        axios({\r\n            method: type,\r\n            url: url,\r\n            baseURL:BASE_URL,\r\n            data:data,\r\n            withCredentials:true,\r\n            //测试用\r\n            headers:{\r\n                \"Authorization\":\"Bearer \"+code\r\n            }\r\n\r\n        }).then(response => {\r\n            resolve(response.data)\r\n        }).catch(reason => {\r\n            console.log(\"Error: \")\r\n            console.log(reason)\r\n            reject(reason)\r\n        })\r\n\r\n\r\n    })\r\n}\r\n","/*\r\n    该文件封装了各个请求，调用接口时无需手动输入路径，直接调用此api的方法即可\r\n\r\n */\r\n\r\n\r\nimport ajax from \"./ajax\";\r\n\r\n\r\n\r\nexport default {\r\n    /**\r\n     * 发送一条消息\r\n     */\r\n    sendMessage(vchatObj) {\r\n        return ajax(`/auth/vchat/`, vchatObj, 'POST')\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * 分页查询消息\r\n     */\r\n    getMessageByPage(page,size) {\r\n        return ajax(`/auth/vchat/list?page=${page}&size=${size}`)\r\n    },\r\n\r\n    /**\r\n     * 获取当前ip\r\n     * @param page\r\n     * @param size\r\n     * @returns {*}\r\n     */\r\n    getMyIp(page,size) {\r\n        return ajax(`/auth/vchat/getMyIp`)\r\n    },\r\n}\r\n","export default {\r\n    getNowDateStr() {\r\n        let now = new Date();\r\n        let year = now.getFullYear();\r\n        let month = ('0' + (now.getMonth() + 1)).slice(-2);\r\n        let day = ('0' + now.getDate()).slice(-2);\r\n        let hour = ('0' + now.getHours()).slice(-2);\r\n        let minute = ('0' + now.getMinutes()).slice(-2);\r\n        let second = ('0' + now.getSeconds()).slice(-2);\r\n        let result = `${year}-${month}-${day} ${hour}:${minute}:${second}`;\r\n        return result;\r\n    }\r\n\r\n}\r\n\r\n\r\n","export default {\r\n    dataURLtoFileFun (dataurl, filename) {\r\n        // 将base64转换为文件，dataurl为base64字符串，filename为文件名（必须带后缀名，如.jpg,.png）\r\n        const arr = dataurl.split(',')\r\n        const mime = arr[0].match(/:(.*?);/)[1]\r\n        const bstr = atob(arr[1])\r\n        let n = bstr.length\r\n        const u8arr = new Uint8Array(n)\r\n        while (n--) {\r\n            u8arr[n] = bstr.charCodeAt(n)\r\n        }\r\n        return new File([u8arr], filename, { type: mime })\r\n    }\r\n}\r\n","<template>\r\n\r\n    <m-chat\r\n            ref=\"mChat\"\r\n            :messages=\"messages\"\r\n            @submit=\"submit\"\r\n            :loadMore=\"loadMore\"\r\n            height=\"100vh\"\r\n            :config=\"config\"\r\n            :comment=\"true\"\r\n            @extendItemClick=\"extendItemClick\"\r\n    >\r\n    </m-chat>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\";\r\n    import api from '../../api'\r\n    import time from \"../../utils/time\";\r\n    import properties from \"../../config\";\r\n    import fileUtil from \"../../utils/fileUtil\";\r\n\r\n    export default {\r\n        name: \"mobile-index\",\r\n        data() {\r\n            return {\r\n                config: {\r\n                    /**\r\n                     * 主题 'light'(亮色)|'dark'(暗色)\r\n                     */\r\n                    theme: 'light',\r\n                    /**\r\n                     * 图片上传\r\n                     */\r\n                    image: {\r\n                        /**\r\n                         * 上传大小最大值(kb)\r\n                         */\r\n                        maxSize: 20480,\r\n                        /**\r\n                         * 允许的文件类型\r\n                         */\r\n                        accept: ['image/*']\r\n                    },\r\n                    /**\r\n                     * 文件上传\r\n                     */\r\n                    file: {\r\n                        maxSize: 20480,\r\n                        accept: ['*']\r\n                    },\r\n                    /**\r\n                     * 视频上传\r\n                     */\r\n                    video: {\r\n                        maxSize: 20480,\r\n                        accept: ['video/*']\r\n                    },\r\n                    /**\r\n                     * 是否开启图片预览 默认true\r\n                     */\r\n                    isImagePreview: true,\r\n                    /**\r\n                     * 图片预览配置（兼容vant ImagePreview 配置）\r\n                     */\r\n                    imagePreviewConfig: {\r\n                        closeable: false\r\n                    },\r\n                    openExtends: ['custom'],\r\n                    /**\r\n                     * 需额外添加的扩展面板item\r\n                     * 如需自定义图标参考vant-icon文档 https://vant-contrib.gitee.io/vant/v2/#/zh-CN/icon#zi-ding-yi-tu-biao\r\n                     */\r\n                    extendArr: [{\r\n                        type: \"custom\",\r\n                        text: \"位置\",\r\n                        icon: \"location-o\",\r\n                        classPrefix: 'van-icon',\r\n                    },]\r\n                },\r\n                messages: [],\r\n                fileList: [],\r\n                ip: \"\",\r\n                page: 1,\r\n            }\r\n        },\r\n        async mounted() {\r\n\r\n            await this.getMyIp()\r\n            this.getMessage()\r\n        },\r\n        methods: {\r\n            /**\r\n             * 发送文件回调\r\n             * 这个file是van-upload 返回的file，并不是真正文件流\r\n             */\r\n            async upload(file) {\r\n                try {\r\n                    // 创建一个 FormData 对象\r\n                    const formData = new FormData();\r\n                    formData.append('file', fileUtil.dataURLtoFileFun(file.content, file.file.name))\r\n                    // config 中的 headers 需要设置'Content-Type': 'multipart/form-data'\r\n                    const config = {\r\n                        headers: {'Content-Type': 'multipart/form-data'},\r\n                    };\r\n                    // 发起 POST 请求\r\n                    let loadToast = this.$toast.loading({\r\n                        message: \"上传中...\",\r\n                        duration: 0\r\n                    });\r\n                    let rawRes = await axios.post(properties.BASE_URL + '/open/example/upload', formData, config);\r\n                    loadToast.clear();\r\n                    if (rawRes.data.code === 20000) {\r\n                        this.$toast(\"上传成功\");\r\n                        return properties.FILE_DOWN_URL + rawRes.data.data;\r\n                    } else {\r\n                        this.$toast(\"上传失败\")\r\n                    }\r\n                } catch (err) {\r\n                    console.error(err.response.data);\r\n                }\r\n            },\r\n            /**\r\n             * 获取当前ip\r\n             *\r\n             */\r\n            async getMyIp() {\r\n                let result = await api.getMyIp();\r\n                this.ip = result.data;\r\n            },\r\n            /**\r\n             * 获取消息\r\n             */\r\n            async getMessage() {\r\n\r\n                console.log(\"当前页码为：\" + this.page)\r\n                let result = await api.getMessageByPage(this.page, 10)\r\n                if (result.length === 0) {\r\n                    return;\r\n                }\r\n                if (!this.messages) {\r\n                    this.messages = []\r\n                }\r\n                //拼接数据\r\n                this.messages =result.data.concat(this.messages)\r\n\r\n                this.messages = this.messages.map((item) => {\r\n                    if (item.ip === this.ip) {\r\n                        item.self = true\r\n                    }\r\n                    return item\r\n                })\r\n            },\r\n            async loadMore() {\r\n                this.page++;\r\n                // 发起 POST 请求\r\n                let loadToast = this.$toast.loading({\r\n                    message: \"加载中...\",\r\n                    duration: 0\r\n                });\r\n                await this.getMessage()\r\n                loadToast.clear();\r\n\r\n            },\r\n            async submit(msg) {\r\n                console.log(msg);\r\n                let sendObj = {...msg};\r\n                sendObj.time = time.getNowDateStr();\r\n\r\n                sendObj.ip = this.ip;\r\n                sendObj.content = {\r\n                    text: \"\", // 文本\r\n                    duration: \"\", // 时长\r\n                    imageUrl: \"\", // 图片地址\r\n                    videoUrl: \"\", // 视频地址\r\n                    audioUrl: \"\", // 音频地址\r\n                    fileUrl: \"\", // 文件地址\r\n                    fileName: \"\", // 文件名称\r\n                    fileSize: \"\", // 文件大小\r\n                    fileExt: \"\", // 文件扩展名\r\n                };\r\n                sendObj.type = msg.type;\r\n                //判断类型 text|image|audio|video|file\r\n                switch (msg.type) {\r\n                    case \"text\":\r\n                        sendObj.content.text = msg.content;\r\n                        break;\r\n                    case \"image\":\r\n                        sendObj.content.imageUrl = await this.upload(msg.content);\r\n                        this.setFileInfo(sendObj, msg.content);\r\n                        break;\r\n                    case \"audio\":\r\n                        sendObj.content.audioUrl = await this.upload(msg.content);\r\n                        this.setFileInfo(sendObj, msg.content);\r\n                        break;\r\n                    case \"video\":\r\n                        sendObj.content.videoUrl = await this.upload(msg.content);\r\n                        this.setFileInfo(sendObj, msg.content);\r\n                        break;\r\n                    case \"file\":\r\n                        sendObj.content.fileUrl = await this.upload(msg.content);\r\n                        this.setFileInfo(sendObj, msg.content);\r\n                        break;\r\n\r\n                    default:\r\n                        console.error(\"不支持的类型\" + msg.type);\r\n                        return;\r\n                }\r\n                //发送请求\r\n                let loadToast = this.$toast.loading();\r\n                let result = await api.sendMessage(sendObj);\r\n                loadToast.clear();\r\n                if (result.code !== 20000) {\r\n                    this.$toast.fail({\r\n                        message: `发送失败：${result.message}`,\r\n                        closeOnClickOverlay: true\r\n                    });\r\n                } else {\r\n                    this.$toast.success({\r\n                        message: `发送成功`,\r\n                        closeOnClick: true,\r\n                        duration: 500\r\n                    });\r\n                    result.data.self = true;\r\n                    this.messages.push(result.data)\r\n                }\r\n\r\n            },\r\n\r\n            /**\r\n             * 自定义面板被点击了\r\n             */\r\n            extendItemClick(item) {\r\n                console.log('扩展面板item点击了', item)\r\n                if (item.type == 'custom') {\r\n                    // 控制扩展面板显示和隐藏\r\n                    this.$refs.mChat.toggleExtend();\r\n                }\r\n            },\r\n\r\n            setFileInfo(sendObj, content) {\r\n                sendObj.content.fileName = content.file.name\r\n                sendObj.content.fileSize = content.file.size\r\n                sendObj.content.fileExt = content.file.name.split('.').pop();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f6dd3d46&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f6dd3d46\",\n  null\n  \n)\n\nexport default component.exports","//该文件用于创建整个应用的路由器\r\nimport Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport PC from \"../pages/PC\"\r\nimport Mobile from \"../pages/Mobile\"\r\n//vue-router本身是一个插件，需要注册\r\nVue.use(VueRouter)\r\n\r\nconst router = new VueRouter({\r\n    mode: 'history',\r\n    routes:[\r\n        //写一组一组的路由，每个路由都是一个配置对象\r\n        {\r\n            path:'/pc',\r\n            component:PC,\r\n        },\r\n        {\r\n            path: '/mobile',\r\n            component: Mobile,\r\n        }\r\n    ]\r\n})\r\n//初始化时调用一次\r\n//然后，在每一次切换路由之前，执行一次这个方法\r\n//全局前置路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n\r\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)\r\n    if (to.query.code){\r\n        localStorage.setItem('code',to.query.code)\r\n    }\r\n    if (isMobile) {\r\n        // 如果是手机访问，则跳转到/mobile路径\r\n        if (to.path !== '/mobile') {\r\n            next('/mobile')\r\n        } else {\r\n            next()\r\n        }\r\n    } else {\r\n        // 如果是PC浏览器访问，则跳转到/pc路径\r\n        if (to.path !== '/pc') {\r\n            next('/pc')\r\n        } else {\r\n            next()\r\n        }\r\n    }\r\n})\r\n\r\n//创建并暴露一个路由器\r\nexport default router\r\n","import Vue from 'vue'\nimport App from './App.vue'\nimport MChat from '@maybecode/m-chat'\nimport router from './router'\nVue.use(MChat)\nimport { Toast } from 'vant';\nVue.use(Toast);\n\nVue.config.productionTip = false\n\n\nnew Vue({\n  render: h => h(App),\n  router\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2269); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","name","component","_v","ref","messages","loadMore","config","on","submit","extendItemClick","BASE_URL","FILE_DOWN_URL","code","localStorage","getItem","ajax","url","data","type","Promise","resolve","reject","axios","method","baseURL","withCredentials","headers","then","response","catch","reason","console","log","sendMessage","vchatObj","getMessageByPage","page","size","getMyIp","getNowDateStr","now","Date","year","getFullYear","month","getMonth","slice","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","result","dataURLtoFileFun","dataurl","filename","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","theme","image","maxSize","accept","file","video","isImagePreview","imagePreviewConfig","closeable","openExtends","extendArr","text","icon","classPrefix","fileList","ip","getMessage","methods","formData","FormData","append","fileUtil","content","loadToast","$toast","loading","message","duration","rawRes","properties","clear","err","error","api","concat","map","item","self","msg","sendObj","time","imageUrl","videoUrl","audioUrl","fileUrl","fileName","fileSize","fileExt","upload","setFileInfo","fail","closeOnClickOverlay","success","closeOnClick","push","$refs","mChat","toggleExtend","pop","Vue","VueRouter","router","mode","routes","path","PC","Mobile","beforeEach","to","from","next","isMobile","test","navigator","userAgent","query","setItem","MChat","Toast","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","key","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","forEach","bind","__webpack_exports__"],"sourceRoot":""}